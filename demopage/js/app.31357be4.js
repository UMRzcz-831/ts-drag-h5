(function(e){function t(t){for(var o,i,r=t[0],c=t[1],s=t[2],u=0,d=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);p&&p(t);while(d.length)d.shift()();return l.push.apply(l,s||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],o=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(o=!1)}o&&(l.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},a={app:0},l=[];function i(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"30274a9a"}[e]+".js"}function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=a[e]=[t,o]}));t.push(n[2]=o);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=i(e);var s=new Error;l=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+l+")",s.name="ChunkLoadError",s.type=o,s.request=l,n[1](s)}a[e]=void 0}};var u=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return Promise.all(t)},r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="ts-drag-h5/demopage/",r.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=s;l.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"00ba":function(e,t,n){"use strict";n("7a61")},"034f":function(e,t,n){"use strict";n("85ec")},"0f70":function(e,t,n){},1180:function(e,t,n){},"14d7":function(e,t,n){},"21bb":function(e,t,n){"use strict";n("2dad")},"29cd":function(e,t,n){"use strict";n("14d7")},"2dad":function(e,t,n){},"3aef":function(e,t,n){},"3ee2":function(e,t,n){},"3ee8":function(e,t,n){"use strict";n("8100")},4334:function(e,t,n){"use strict";n("f08b")},4606:function(e,t,n){},"549e":function(e,t,n){"use strict";n("a957")},5738:function(e,t,n){},"5e4a":function(e,t,n){"use strict";n("0f70")},"7a61":function(e,t,n){},8100:function(e,t,n){},"85ec":function(e,t,n){},9292:function(e,t,n){"use strict";n("5738")},9318:function(e,t,n){},"9e7e":function(e,t,n){"use strict";n("4606")},a957:function(e,t,n){},be35:function(e,t,n){},c69f:function(e,t,n){},c7e6:function(e,t,n){"use strict";n("9318")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},l=[],i={name:"app",components:{}},r=i,c=(n("034f"),n("2877")),s=Object(c["a"])(r,a,l,!1,null,null,null),u=s.exports,p=(n("d3b7"),n("8c4f")),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("header",[n("el-tooltip",{attrs:{effect:"dark",content:"撤消",placement:"bottom"}},[n("el-button",{staticClass:"iconfont icon-corner-up-left",on:{click:e.undo}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"重做",placement:"bottom"}},[n("el-button",{staticClass:"iconfont icon-corner-up-right",on:{click:e.redo}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"插入图片",placement:"bottom"}},[n("label",{staticClass:"insert iconfont icon-image",attrs:{for:"input"}})]),n("input",{attrs:{type:"file",id:"input",hidden:""},on:{change:e.handleFileChange}}),n("el-tooltip",{attrs:{effect:"dark",content:"预览",placement:"bottom"}},[n("el-button",{staticClass:"iconfont icon-cast",staticStyle:{"margin-left":"10px"},on:{click:e.preview}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"保存",placement:"bottom"}},[n("el-button",{staticClass:"iconfont icon-check-circle",on:{click:e.save}})],1),n("el-tooltip",{attrs:{effect:"dark",content:"读取存档",placement:"bottom"}},[n("label",{staticClass:"insert iconfont icon-loader",attrs:{for:"backup"}})]),n("input",{attrs:{type:"file",id:"backup",hidden:""},on:{change:e.readBackup}}),n("el-tooltip",{attrs:{effect:"dark",content:"清空画布",placement:"bottom"}},[n("el-button",{staticClass:"iconfont icon-x",on:{click:e.clearCanvas}})],1),n("div",{staticClass:"canvas-config"},[n("span",[e._v("画布大小")]),n("el-input",{staticClass:"input",attrs:{placeholder:"宽度"},model:{value:e.canvasStyle.width,callback:function(t){e.$set(e.canvasStyle,"width",t)},expression:"canvasStyle.width"}}),n("span",[e._v("*")]),n("el-input",{staticClass:"input",attrs:{placeholder:"高度"},model:{value:e.canvasStyle.height,callback:function(t){e.$set(e.canvasStyle,"height",t)},expression:"canvasStyle.height"}})],1)],1),n("main",[n("section",{staticClass:"left"},[n("ComponentList")],1),n("section",{staticClass:"center"},[n("div",{staticClass:"content",on:{drop:e.handleDrop,dragover:e.handleDragOver,click:e.deselectCurComponent}},[n("Canvas")],1)]),n("section",{staticClass:"right"},[n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"属性",name:"attr"}},[e.curComponent?n("AttrList"):n("p",{staticClass:"placeholder"},[e._v("请选择组件")])],1),n("el-tab-pane",{attrs:{label:"动画",name:"animation"}},[e.curComponent?n("div",{staticClass:"div-animation"},[n("el-button",{on:{click:function(t){e.isShowAnimation=!0}}},[e._v("添加动画")]),n("el-button",{on:{click:e.previewAnimate}},[e._v("预览动画")]),n("div",e._l(e.curComponent.animations,(function(t,o){return n("el-tag",{key:o,attrs:{closable:""},on:{close:function(t){return e.removeAnimation(o)}}},[e._v(" "+e._s(t.label)+" ")])})),1)],1):n("p",{staticClass:"placeholder"},[e._v("请选择组件")])]),n("el-tab-pane",{attrs:{label:"事件",name:"events"}},[e.curComponent?n("div",{staticClass:"div-events"},[n("el-button",{on:{click:function(t){e.isShowEvent=!0}}},[e._v("添加事件")]),n("div",e._l(Object.keys(e.curComponent.events),(function(t){return n("el-tag",{key:t,attrs:{closable:""},on:{close:function(n){return e.removeEvent(t)}}},[e._v(" "+e._s(t)+" ")])})),1)],1):n("p",{staticClass:"placeholder"},[e._v("请选择组件")])])],1)],1)]),n("Preview",{on:{change:e.handlePreviewChange},model:{value:e.isShowPreview,callback:function(t){e.isShowPreview=t},expression:"isShowPreview"}})],1)},f=[],m=(n("caad"),n("2532"),n("2f62")),h=(n("d81d"),n("53ca")),v=n("5c96"),b=n.n(v);function y(e){if("object"==Object(h["a"])(e)){if(Array.isArray(e))return e.map((function(e){return y(e)}));var t={};for(var n in e)"object"==Object(h["a"])(e[n])?t[n]=y(e[n]):t[n]=e[n];return t}return e}function g(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function C(e,t,n){var o={message:e};t&&(o.type=t),n&&(o.duration=n),Object(v["Message"])(o)}var x=new o["default"],S=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedInRight"},{label:"光速从左进入",value:"lightSpeedInLeft"},{label:"光速从右退出",value:"lightSpeedOutRight"},{label:"光速从左退出",value:"lightSpeedOutLeft"},{label:"Y轴旋转",value:"flip"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}],O=0;function w(){return O++}var j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor",class:{edit:e.isEdit},style:{width:e.canvasStyle.width+"px",height:e.canvasStyle.height+"px"},attrs:{id:"editor"}},[e._l(e.componentData,(function(t,o){return n("Shape",{key:t.id,style:e.getShapeStyle(t.style,o),attrs:{defaultStyle:t.style,active:t===e.curComponent,element:t,zIndex:o}},["umr-text"!=t.component?n(t.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(t.style),attrs:{propValue:t.propValue}}):"umr-button"==t.component?n(t.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(t.style),attrs:{propValue:t.propValue,type:t.ButtonType}}):(t.component,n(t.component,{tag:"component",staticClass:"component",style:e.getComponentStyle(t.style),attrs:{propValue:t.propValue,element:t},on:{input:e.handleInput}}))],1)})),n("ContextMenu"),n("MarkLine")],2)},k=[],$=(n("ac1f"),n("1276"),n("5530")),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"baseEl",on:{click:e.selectCurComponent,mousedown:e.handleMouseDown,contextmenu:e.handleContextMenu}},[e._l(e.active?e.pointList:[],(function(t,o){return n("div",{key:o,staticClass:"position-point",style:e.getPointStyle(t),on:{mousedown:function(n){return e.handleMouseDownPoint(t)}}})})),e._t("default")],2)},I=[],D=(n("a15b"),n("a9e3"),n("d4ec")),L=n("bee2"),N=n("262e"),E=n("2caf"),P=n("9ab4"),M=n("60a3"),T=function(e){Object(N["a"])(n,e);var t=Object(E["a"])(n);function n(){var e;return Object(D["a"])(this,n),e=t.apply(this,arguments),e.pointList=["t","r","b","l","lt","rt","lb","rb"],e.directionKey={t:"n",b:"s",l:"w",r:"e"},e}return Object(L["a"])(n,[{key:"getPointStyle",value:function(e){var t=this.defaultStyle,n=t.width,o=t.height,a=/t/.test(e),l=/b/.test(e),i=/l/.test(e),r=/r/.test(e),c=0,s=0;2===e.length?(c=i?0:n,s=a?0:o):((a||l)&&(c=n/2,s=a?0:o),(i||r)&&(c=i?0:n,s=Math.floor(o/2)));var u=this.directionKey,p={marginLeft:r?"-4px":"-3px",marginTop:"-3px",left:"".concat(c,"px"),top:"".concat(s,"px"),cursor:e.split("").reverse().map((function(e){return u[e]})).join("")+"-resize"};return p}},{key:"handleMouseDown",value:function(e){var t=this;"umr-text"!=this.element.component&&e.preventDefault(),e.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,zIndex:this.zIndex});var n=this.convertPosition(Object($["a"])({},this.defaultStyle)),o=e.clientY,a=e.clientX,l=n.top,i=n.left,r=!1,c=function(e){r=!0;var c=e.clientX,s=e.clientY;n.top=s-o+l,n.left=c-a+i,t.$store.commit("setShapeStyle",n),t.$nextTick((function(){x.$emit("move",t.$el,s-o>0,c-a>0)}))},s=function e(){r&&t.$store.commit("recordSnapshot"),x.$emit("unmove"),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",s)}},{key:"selectCurComponent",value:function(e){e.stopPropagation(),e.preventDefault(),this.$store.commit("hideContexeMenu")}},{key:"handleContextMenu",value:function(e){e.stopPropagation(),e.preventDefault();var t=e.target,n=e.offsetY,o=e.offsetX;while(!t.className.includes("editor"))o+=t.offsetLeft,n+=t.offsetTop,t=t.parentNode;this.$store.commit("showContexeMenu",{top:n,left:o})}},{key:"handleMouseDownPoint",value:function(e){var t=this,n=window.event;n.stopPropagation(),n.preventDefault();var o=this.convertPosition(Object($["a"])({},this.defaultStyle)),a=n.clientX,l=n.clientY,i=o.height,r=o.width,c=o.top,s=o.left,u=!1,p=function(n){u=!0;var p=n.clientX,d=n.clientY,f=d-l,m=p-a,h=/t/.test(e),v=/b/.test(e),b=/l/.test(e),y=/r/.test(e),g=i+(h?-f:v?f:0),C=r+(b?-m:y?m:0);o.height=g>0?g:0,o.width=C>0?C:0,o.left=s+(b?m:0),o.top=c+(h?f:0),t.$store.commit("setShapeStyle",o),t.$nextTick((function(){x.$emit("move",t.$el,d-l>0,p-a>0)}))},d=function e(){x.$emit("unmove"),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",e),u&&t.$store.commit("recordSnapshot")};document.addEventListener("mousemove",p),document.addEventListener("mouseup",d)}},{key:"convertPosition",value:function(e){var t=Number(e.height),n=Number(e.width),o=Number(e.top),a=Number(e.left);return{height:t,width:n,top:o,left:a}}}]),n}(M["c"]);Object(P["a"])([Object(M["b"])({required:!0})],T.prototype,"defaultStyle",void 0),Object(P["a"])([Object(M["b"])({default:!1})],T.prototype,"active",void 0),Object(P["a"])([Object(M["b"])({required:!0})],T.prototype,"element",void 0),Object(P["a"])([Object(M["b"])()],T.prototype,"zIndex",void 0),T=Object(P["a"])([M["a"]],T);var V=T,B=V,A=(n("c7e6"),Object(c["a"])(B,_,I,!1,null,"17b2c736",null)),z=A.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"markline"},e._l(e.lines,(function(t){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.lineStatus[t]||!1,expression:"lineStatus[line] || false"}],key:t,ref:t,refInFor:!0,staticClass:"line",class:t.includes("x")?"xline":"yline"})})),0)},R=[],Y=(n("4160"),n("b64b"),n("159b"),function(e){Object(N["a"])(n,e);var t=Object(E["a"])(n);function n(){var e;return Object(D["a"])(this,n),e=t.apply(this,arguments),e.lines=["xt","xc","xb","yl","yc","yr"],e.diff=3,e.lineStatus={xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1},e.editor=null,e}return Object(L["a"])(n,[{key:"initLineStatus",value:function(){var e=this;this.lines.forEach((function(t){e.lineStatus[t]=!1}))}},{key:"mounted",value:function(){var e=this;this.editor=document.querySelector("#editor"),x.$on("move",(function(t,n,o){e.showLine(t,n,o)})),x.$on("unmove",(function(){e.hideLine()}))}},{key:"hideLine",value:function(){var e=this;Object.keys(this.lineStatus).forEach((function(t){e.lineStatus[t]=!1}))}},{key:"showLine",value:function(e,t,n){var o=this.$refs,a=document.querySelectorAll(".baseEl");this.hideLine(),this.conditionJudge(a,e,o,t,n)}},{key:"getNodePositionToEditor",value:function(e){var t=e.getBoundingClientRect(),n=t.top,o=t.bottom,a=t.left,l=t.right,i=t.width,r=t.height,c=this.editor.getBoundingClientRect();return a-=c.left,n-=c.top,l-=c.left,o-=c.top,{top:n,bottom:o,left:a,right:l,width:i,height:r}}},{key:"isNearly",value:function(e,t){return Math.abs(e-t)<=this.diff}},{key:"conditionJudge",value:function(e,t,n,o,a){var l=this;e.forEach((function(e){if(e!=t){var i=l.getNodePositionToEditor(e),r=i.top,c=i.height,s=i.bottom,u=i.left,p=i.width,d=i.right,f=p/2,m=c/2,h=l.getNodePositionToEditor(t),v=h.width/2,b=h.height/2,y={top:[{isNearly:l.isNearly(h.top,r),lineNode:n.xt[0],line:"xt",dragShift:r,lineShift:r},{isNearly:l.isNearly(h.bottom,r),lineNode:n.xt[0],line:"xt",dragShift:r-h.height,lineShift:r},{isNearly:l.isNearly(h.top+b,r+m),lineNode:n.xc[0],line:"xc",dragShift:r+m-b,lineShift:r+m},{isNearly:l.isNearly(h.top,s),lineNode:n.xb[0],line:"xb",dragShift:s,lineShift:s},{isNearly:l.isNearly(h.bottom,s),lineNode:n.xb[0],line:"xb",dragShift:s-h.height,lineShift:s}],left:[{isNearly:l.isNearly(h.left,u),lineNode:n.yl[0],line:"yl",dragShift:u,lineShift:u},{isNearly:l.isNearly(h.right,u),lineNode:n.yl[0],line:"yl",dragShift:u-h.width,lineShift:u},{isNearly:l.isNearly(h.left+v,u+f),lineNode:n.yc[0],line:"yc",dragShift:u+f-v,lineShift:u+f},{isNearly:l.isNearly(h.left,d),lineNode:n.yr[0],line:"yr",dragShift:d,lineShift:d},{isNearly:l.isNearly(h.right,d),lineNode:n.yr[0],line:"yr",dragShift:d-h.width,lineShift:d}]},g=[];Object.keys(y)&&Object.keys(y).forEach((function(e){y[e].forEach((function(t){t.isNearly&&(l.$store.commit("setShapePosStyle",{key:e,value:t.dragShift}),t.lineNode.style[e]="".concat(t.lineShift,"px"),g.push(t.line))}))})),g.length&&l.showBetterLine(g,o,a)}}))}},{key:"showBetterLine",value:function(e,t,n){n?e.includes("yr")?this.lineStatus.yr=!0:e.includes("yc")?this.lineStatus.yc=!0:e.includes("yl")&&(this.lineStatus.yl=!0):e.includes("yl")?this.lineStatus.yl=!0:e.includes("yc")?this.lineStatus.yc=!0:e.includes("yr")&&(this.lineStatus.yr=!0),t?e.includes("xb")?this.lineStatus.xb=!0:e.includes("xc")?this.lineStatus.xc=!0:e.includes("xt")&&(this.lineStatus.xt=!0):e.includes("xt")?this.lineStatus.xt=!0:e.includes("xc")?this.lineStatus.xc=!0:e.includes("xb")&&(this.lineStatus.xb=!0)}}]),n}(M["c"]));Y=Object(P["a"])([M["a"]],Y);var H=Y,X=H,q=(n("9292"),Object(c["a"])(X,U,R,!1,null,"37632e8d",null)),W=q.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.menuShow,expression:"menuShow"}],staticClass:"contextMenu",style:{top:e.menuTop+"px",left:e.menuLeft+"px"}},[n("ul",[n("li",{on:{click:e.copyComponent}},[e._v("复制")]),n("li",{on:{click:e.upwardComponent}},[e._v("上移")]),n("li",{on:{click:e.downwardComponent}},[e._v("下移")]),n("li",{on:{click:e.topComponent}},[e._v("置顶")]),n("li",{on:{click:e.bottomComponent}},[e._v("置底")]),n("li",{staticClass:"danger-btn",on:{click:e.deleteComponent}},[e._v("删除")])])])},Z=[],F=function(e){Object(N["a"])(n,e);var t=Object(E["a"])(n);function n(){return Object(D["a"])(this,n),t.apply(this,arguments)}return Object(L["a"])(n,[{key:"copyComponent",value:function(){this.$store.commit("copyComponent"),this.$store.commit("recordSnapshot")}},{key:"deleteComponent",value:function(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")}},{key:"upwardComponent",value:function(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")}},{key:"downwardComponent",value:function(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")}},{key:"topComponent",value:function(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")}},{key:"bottomComponent",value:function(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}]),n}(M["c"]);F=Object(P["a"])([Object(M["a"])({computed:Object(m["b"])(["menuShow","menuLeft","menuTop"])})],F);var K=F,G=K,Q=(n("9e7e"),Object(c["a"])(G,J,Z,!1,null,"37f0e6dc",null)),ee=Q.exports;function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=["color","backgroundColor","textAlign","opacity","lineHeight","fontWeight","borderColor"],o={};return Object.keys(e).forEach((function(a){t.includes(a)||("rotate"!=a?(o[a]=e[a],n.includes(a)||(o[a]+="px")):o.transform=a+"("+e[a]+"deg)")})),o}var ne={props:{isEdit:{type:Boolean,default:!0}},components:{Shape:z,MarkLine:W,ContextMenu:ee},computed:Object(m["b"])(["canvasStyle","componentData","curComponent"]),data:function(){return{}},methods:{getShapeStyle:function(e,t){var n=Object($["a"])({},e);return n.width&&(n.width+="px"),n.height&&(n.height+="px"),n.top&&(n.top+="px"),n.left&&(n.left+="px"),n.rotate&&(n.transform="rotate("+n.rotate+"deg)"),n.zIndex=t,n},getComponentStyle:function(e){return te(e,["top","left","width","height","zIndex","rotate"])},handleInput:function(e,t){e.propValue=t,this.$store.commit("setShapeStyle",{height:this.getTextareaHeight(e,t)})},getTextareaHeight:function(e,t){var n=e.style.lineHeight,o=e.style,a=o.fontSize,l=o.height;""===n&&(n=1.5);var i=t.split("\n").length*n*a;return l>i?l:i}}},oe=ne,ae=(n("00ba"),Object(c["a"])(oe,j,k,!1,null,"7d9058f3",null)),le=ae.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"bg"},[n("el-button",{staticClass:"close",on:{click:e.close}},[e._v("关闭")]),n("div",{staticClass:"canvas",style:{width:e.canvasStyle.width+"px",height:e.canvasStyle.height+"px"}},e._l(e.componentData,(function(e,t){return n("Wrapper",{key:t,attrs:{config:e}})})),1)],1):e._e()},re=[],ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n(e.config.component,{tag:"component",staticClass:"conponent",style:e.getStyle(e.config.style),attrs:{propValue:e.config.propValue}})],1)},se=[],ue={props:{config:{type:Object,require:!0}},mounted:function(){},methods:{getStyle:te,handleClick:function(){var e=this,t=this.config.events;Object.keys(t).forEach((function(n){e[n](t[n])}))}}},pe=ue,de=(n("5e4a"),Object(c["a"])(pe,ce,se,!1,null,"4606b492",null)),fe=de.exports,me={model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1}},components:{Wrapper:fe},computed:Object(m["b"])(["componentData","canvasStyle"]),methods:{getStyle:te,close:function(){this.$emit("change",!1)}}},he=me,ve=(n("f6c1"),Object(c["a"])(he,ie,re,!1,null,"63e0cde0",null)),be=ve.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"attr-list"},[n("el-form",[e._l(e.styleKeys,(function(t,o){return n("el-form-item",{key:o,attrs:{label:e.map[t]}},["borderColor"==t||"color"==t||"backgroundColor"==t?n("el-color-picker",{model:{value:e.curComponent.style[t],callback:function(n){e.$set(e.curComponent.style,t,n)},expression:"curComponent.style[key]"}}):"textAlign"==t?n("el-select",{model:{value:e.curComponent.style[t],callback:function(n){e.$set(e.curComponent.style,t,n)},expression:"curComponent.style[key]"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):n("el-input",{attrs:{type:"number"},model:{value:e.curComponent.style[t],callback:function(n){e.$set(e.curComponent.style,t,n)},expression:"curComponent.style[key]"}})],1)})),e.curComponent&&"umr-button"==e.$store.state.curComponent.component?n("el-form-item",{attrs:{label:"按钮类型"}},[n("el-select",{model:{value:e.curComponent.ButtonType,callback:function(t){e.$set(e.curComponent,"ButtonType",t)},expression:"curComponent.ButtonType"}},e._l(e.ButtonTypeOptions,(function(e){return n("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e.curComponent&&"umr-field"==e.$store.state.curComponent.component?n("el-form-item",{attrs:{label:"输入框提示"}},[n("el-input",{attrs:{type:"textarea"},on:{change:e.handlePlaceholder},model:{value:e.curComponent.Umrplaceholder,callback:function(t){e.$set(e.curComponent,"Umrplaceholder",t)},expression:"curComponent.Umrplaceholder"}})],1):e._e(),e.curComponent&&"umr-field"==e.$store.state.curComponent.component?n("el-form-item",{attrs:{label:"是否为密码框"}},[n("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.curComponent.pswdMode,callback:function(t){e.$set(e.curComponent,"pswdMode",t)},expression:"curComponent.pswdMode"}})],1):e._e(),e.curComponent&&!e.excludes.includes(e.curComponent.component)?n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.curComponent.propValue,callback:function(t){e.$set(e.curComponent,"propValue",t)},expression:"curComponent.propValue"}})],1):e._e()],2)],1)},ge=[],Ce={data:function(){return{excludes:["umr-picture"],options:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],map:{left:"x 坐标",top:"y 坐标",height:"高",width:"宽",color:"颜色",backgroundColor:"背景色",borderWidth:"边框宽度",borderColor:"边框颜色",borderRadius:"边框半径",fontSize:"字体大小",fontWeight:"字体粗细",lineHeight:"行高",letterSpacing:"字间距",textAlign:"对齐方式",opacity:"透明度",rotate:"旋转角度"},ButtonTypeOptions:[{label:"圆角",value:"plain"},{label:"圆形",value:"round"},{label:"禁用",value:"buttonDisabled"}]}},computed:{styleKeys:function(){return this.$store.state.curComponent?Object.keys(this.$store.state.curComponent.style):[]},curComponent:function(){return this.$store.state.curComponent}},methods:{handlePlaceholder:function(){console.log(this.curComponent),this.$store.commit("setCurComponentData",this.curComponent)}}},xe=Ce,Se=(n("29cd"),Object(c["a"])(xe,ye,ge,!1,null,"cd7656e4",null)),Oe=Se.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-list",on:{dragstart:e.handleDragStart}},e._l(e.componentList,(function(e,t){return n("el-tooltip",{key:t,attrs:{effect:"dark",content:e.label,placement:"bottom"}},[n("div",{staticClass:"listItem",attrs:{draggable:"","data-index":t}},[n("i",{staticClass:"iconfont",class:e.icon})])])})),1)},je=[],ke={rotate:"",opacity:1},$e=[{component:"umr-text",label:"文字组件",propValue:"文字",icon:"icon-type",animations:[],events:{},style:{width:200,height:33,fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:""}},{component:"umr-field",label:"输入框组件",propValue:"",Umrplaceholder:"这是一个输入框",icon:"icon-italic",pswdMode:!1,animations:[],events:{},style:{width:200,height:33,fontSize:16,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:""}},{component:"umr-button",label:"按钮",propValue:"按钮",icon:"icon-hashtag",animations:[],events:{},ButtonType:"",style:{width:100,height:40,borderWidth:"",borderColor:"",borderRadius:"",fontSize:14,fontWeight:500,lineHeight:"",letterSpacing:0,textAlign:"",color:"",backgroundColor:""}},{component:"umr-picture",label:"图片组件",icon:"icon-image",propValue:n("cf05"),animations:[],events:{},style:{width:300,height:200,borderRadius:""}}];$e.forEach((function(e){e.style=Object($["a"])(Object($["a"])({},e.style),ke)}));var _e=$e,Ie=function(e){Object(N["a"])(n,e);var t=Object(E["a"])(n);function n(){var e;return Object(D["a"])(this,n),e=t.apply(this,arguments),e.componentList=_e,e}return Object(L["a"])(n,[{key:"handleDragStart",value:function(e){e.dataTransfer.setData("index",e.target.dataset.index)}}]),n}(M["c"]);Ie=Object(P["a"])([M["a"]],Ie);var De=Ie,Le=De,Ne=(n("de9b"),Object(c["a"])(Le,we,je,!1,null,"1a0b5492",null)),Ee=Ne.exports,Pe={name:"Home",components:{Canvas:le,ComponentList:Ee,AttrList:Oe,Preview:be},computed:Object(m["b"])(["componentData","canvasStyle","curComponent"]),data:function(){return{input:"",isShowPreview:!1,isShowAnimation:!1,activeName:"attr",animationClassData:S,animationActiveName:"进入",showAnimatePanel:!1,reSelectAnimateIndex:void 0}},methods:{handleFileChange:function(e){var t=this,n=e.target.files[0];if(n.type.includes("image")){var o=new FileReader;o.onload=function(e){var n=e.target.result,o=new Image;o.onload=function(){t.$store.commit("addComponent",{id:w(),component:"umr-picture",label:"图片",icon:"",propValue:n,animations:[],events:[],style:{top:0,left:0,width:o.width,height:o.height,rotate:""}})},o.src=n},o.readAsDataURL(n)}else this.$message("只能上传图片")},preview:function(){this.isShowPreview=!0,this.$store.commit("setEditMode","read")},save:function(){var e=this;this.$prompt("请输入文件名","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var n=t.value;e.$message({type:"success",message:"成功"}),e.$store.commit("saveAsJson",n)})).catch((function(){e.$message({type:"info",message:"取消保存"})}))},readBackup:function(e){var t=this,n=e.target.files[0];if(n.type.includes("json")){var o=new FileReader;o.onload=function(e){var n=e.target.result,o=JSON.parse(n);t.$store.commit("restore",o),console.log(o)},o.readAsText(n)}else this.$message("只支持json")},clearCanvas:function(){this.$store.commit("setComponentData",[])},undo:function(){this.$store.commit("undo")},redo:function(){this.$store.commit("redo")},handleDrop:function(e){e.preventDefault(),e.stopPropagation();var t=y(_e[e.dataTransfer.getData("index")]);t.style.top=e.offsetY,t.style.left=e.offsetX,t.id=w(),this.$store.commit("addComponent",t),this.$store.commit("recordSnapshot")},handleDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},deselectCurComponent:function(){this.$store.commit("setCurComponent",{component:null,zIndex:null}),this.$store.commit("hideContexeMenu")},previewAnimate:function(){x.$emit("runAnimation")},handlePreviewChange:function(){this.$store.commit("setEditMode","edit")}}},Me=Pe,Te=(n("21bb"),Object(c["a"])(Me,d,f,!1,null,null,null)),Ve=Te.exports;o["default"].use(p["a"]);var Be=[{path:"/",name:"Home",component:Ve},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Ae=new p["a"]({routes:Be}),ze=Ae,Ue=(n("fb6a"),n("a434"),n("31bf")),Re=n.n(Ue);o["default"].use(m["a"]);var Ye=new m["a"].Store({state:{editMode:"edit",canvasStyle:{width:375,height:700},componentData:[],snapshotData:[],snapshotIndex:-1,curComponent:null,curComponentZIndex:null,menuTop:0,menuLeft:0,menuShow:!1},mutations:{setEditMode:function(e,t){e.editMode=t},setCanvasStyle:function(e,t){e.canvasStyle=t},addComponent:function(e,t){e.componentData.push(t)},undo:function(e){e.snapshotIndex>=0&&(e.snapshotIndex--,Ye.commit("setComponentData",y(e.snapshotData[e.snapshotIndex])))},redo:function(e){e.snapshotIndex<e.snapshotData.length-1&&(e.snapshotIndex++,Ye.commit("setComponentData",y(e.snapshotData[e.snapshotIndex])))},saveAsJson:function(e,t){var n=y(e);n.snapshotData=[],n.snapshotIndex=-1,n.curComponent=null,n.curComponentZIndex=-1;var o=JSON.stringify(n),a=new Blob([o],{type:"text/plain;charset=utf-8"});Re.a.saveAs(a,"".concat(t,".json"))},restore:function(e,t){this.replaceState(Object($["a"])({},t))},setComponentData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o["default"].set(e,"componentData",t)},setCurComponentData:function(e,t){o["default"].set(e,"curComponent",t)},recordSnapshot:function(e){e.snapshotData[++e.snapshotIndex]=y(e.componentData),e.snapshotIndex<e.snapshotData.length-1&&(e.snapshotData=e.snapshotData.slice(0,e.snapshotIndex+1))},showContexeMenu:function(e,t){var n=t.top,o=t.left;e.menuShow=!0,e.menuTop=n,e.menuLeft=o},hideContexeMenu:function(e){e.menuShow=!1},upComponent:function(e){var t=e.componentData,n=e.curComponentZIndex;n<t.length-1?g(t,n,n+1):C("已经到顶了","error")},downComponent:function(e){var t=e.componentData,n=e.curComponentZIndex;n>0?g(t,n,n-1):C("已经到底了","error")},topComponent:function(e){var t=e.componentData,n=e.curComponentZIndex;n<t.length-1?g(t,n,t.length-1):C("已经到顶了","error")},bottomComponent:function(e){var t=e.componentData,n=e.curComponentZIndex;n>0?g(t,n,0):C("已经到底了","error")},deleteComponent:function(e){e.componentData.splice(e.curComponentZIndex,1),C("删除成功","success")},copyComponent:function(e){var t=y(e.curComponent);t.id=w(),t.style.left+=20,t.style.top+=20,e.componentData.push(t),C("复制成功","success")},setCurComponent:function(e,t){var n=t.component,o=t.zIndex;e.curComponent=n,e.curComponentZIndex=o},setShapeStyle:function(e,t){var n=e.curComponent,o=t.top,a=t.left,l=t.width,i=t.height;o&&(n.style.top=o),a&&(n.style.left=a),l&&(n.style.width=l),i&&(n.style.height=i)},setShapePosStyle:function(e,t){var n=e.curComponent,o=t.key,a=t.value;n.style[o]=a}},actions:{},modules:{}}),He=Ye;n("c69f");o["default"].use(b.a,{size:"small"});n("3ee2");var Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{overflow:"hidden"}},[n("img",{attrs:{src:e.propValue}})])},qe=[],We=function(e){Object(N["a"])(n,e);var t=Object(E["a"])(n);function n(){return Object(D["a"])(this,n),t.apply(this,arguments)}return n}(M["c"]);We=Object(P["a"])([Object(M["a"])({props:{propValue:{type:String,required:!0}}})],We);var Je=We,Ze=Je,Fe=(n("549e"),Object(c["a"])(Ze,Xe,qe,!1,null,"3e71a03e",null)),Ke=Fe.exports,Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"umr-button",class:e.computedType},[e._v(" "+e._s(e.propValue)+" ")])},Qe=[],et=function(e){Object(N["a"])(n,e);var t=Object(E["a"])(n);function n(){return Object(D["a"])(this,n),t.apply(this,arguments)}return Object(L["a"])(n,[{key:"computedType",get:function(){return"is-".concat(this.type)}}]),n}(M["c"]);Object(P["a"])([Object(M["b"])({default:"plain"})],et.prototype,"type",void 0),et=Object(P["a"])([Object(M["a"])({props:{propValue:{type:String,required:!0}}})],et);var tt=et,nt=tt,ot=(n("4334"),Object(c["a"])(nt,Ge,Qe,!1,null,"01f6ecce",null)),at=ot.exports,lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"edit"==e.editMode?n("textarea",{ref:"v-text",staticClass:"text textarea",domProps:{value:e.propValue},on:{input:e.handleInput}}):n("div",{staticClass:"text disabled"},e._l(e.propValue.split("\n"),(function(t,o){return n("div",{key:o},[e._v(" "+e._s(t)+" ")])})),0)},it=[],rt=function(e){Object(N["a"])(n,e);var t=Object(E["a"])(n);function n(){return Object(D["a"])(this,n),t.apply(this,arguments)}return Object(L["a"])(n,[{key:"handleInput",value:function(e){this.$emit("input",this.$props.element,e.target.value)}}]),n}(M["c"]);rt=Object(P["a"])([Object(M["a"])({props:{propValue:{type:String,required:!0},element:{type:Object}},computed:Object($["a"])({},Object(m["b"])(["editMode"]))})],rt);var ct=rt,st=ct,ut=(n("3ee8"),Object(c["a"])(st,lt,it,!1,null,"56c5564c",null)),pt=ut.exports,dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-input",{attrs:{placeholder:e.Umrplaceholder,size:"normal",clearable:"","show-password":e.pswdMode},on:{change:e.handleInput},model:{value:e.myPropValue,callback:function(t){e.myPropValue=t},expression:"myPropValue"}})},ft=[],mt=function(e){Object(N["a"])(n,e);var t=Object(E["a"])(n);function n(){return Object(D["a"])(this,n),t.apply(this,arguments)}return Object(L["a"])(n,[{key:"handleInput",value:function(e){this.$emit("input",this.$props.element,e.target.value)}},{key:"myPropValue",get:function(){return this.$props.propValue}}]),n}(M["c"]);mt=Object(P["a"])([Object(M["a"])({props:{propValue:{type:String},Umrplaceholder:{type:String},pswdMode:{type:Boolean,default:!1},element:{type:Object}},computed:{}})],mt);var ht=mt,vt=ht,bt=Object(c["a"])(vt,dt,ft,!1,null,"f5eeb368",null),yt=bt.exports;o["default"].component("UmrText",pt),o["default"].component("UmrPicture",Ke),o["default"].component("UmrButton",at),o["default"].component("UmrField",yt);n("be35");o["default"].config.productionTip=!1,new o["default"]({router:ze,store:He,render:function(e){return e(u)}}).$mount("#app")},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},de9b:function(e,t,n){"use strict";n("1180")},f08b:function(e,t,n){},f6c1:function(e,t,n){"use strict";n("3aef")}});
//# sourceMappingURL=app.31357be4.js.map